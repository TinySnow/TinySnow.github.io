# 输入输出系统

## 复习

1. 了解了计算机由输入设备、存储器、运算器和输出设备组成
2. 掌握了计算机内部使用二进制表示所有数据
3. 理解了 CPU 如何执行指令，以及指令执行的基本过程
4. 学习了计算机总线如何连接各个部件

## TL;DR

- 输入输出系统负责计算机与外部世界的数据交换
- I/O 设备通过控制器与系统总线相连
- I/O 操作可以采用程序查询、中断和 DMA 三种方式
- 现代计算机支持即插即用，可以自动识别和配置 I/O 设备

## 正文

　　计算机需要与外部世界交换数据，这就需要输入输出系统的支持。比如，我们用键盘输入文字，用鼠标点击按钮，用显示器查看结果，用打印机打印文档，这些都需要输入输出系统的参与。

### 输入输出设备

　　输入输出设备（I/O 设备）可以按照数据传输速率分类：

1. 低速设备：
   - 键盘、鼠标
   - 打印机、扫描仪
   - 速率通常在 KB/s 级别

2. 中速设备：
   - 声卡
   - 调制解调器
   - 速率在 MB/s 级别

3. 高速设备：
   - 硬盘、固态硬盘
   - 显卡
   - 网卡
   - 速率可达 GB/s 级别

### I/O 接口

　　I/O 设备不能直接与系统总线相连，需要通过 I/O 接口（也称设备控制器）。I/O 接口的主要功能：

1. 数据缓冲：
   - 协调不同速度设备间的数据传输
   - 暂存输入输出的数据

2. 数据格式转换：
   - 将设备的数据格式转换为计算机内部格式
   - 将计算机内部格式转换为设备可识别的格式

3. 控制和状态管理：
   - 接收 CPU 的命令并控制设备
   - 监控设备的工作状态

### I/O 控制方式

　　CPU 与 I/O 设备的数据传输有三种基本方式：

1. 程序查询方式：
   - CPU 不断查询设备状态
   - 发现设备就绪后才传输数据
   - 优点：实现简单
   - 缺点：CPU 浪费大量时间等待

2. 中断方式：
   - 设备就绪时向 CPU 发出中断请求
   - CPU 响应中断后进行数据传输
   - 优点：CPU 利用率高
   - 缺点：每传输一个数据就中断一次

3. DMA 方式：
   - 设备与内存直接传输数据
   - 不需要 CPU 干预
   - 优点：效率最高
   - 缺点：需要专门的硬件支持

### 现代 I/O 系统

　　现代计算机的 I/O 系统具有以下特点：

1. 即插即用：
   - 自动识别新接入的设备
   - 自动加载驱动程序
   - 自动分配系统资源

2. 标准化接口：
   - USB（通用串行总线）
   - HDMI（高清晰度多媒体接口）
   - 蓝牙、Wi-Fi 等无线接口

3. 智能化管理：
   - 设备电源管理
   - 错误检测和恢复
   - 热插拔支持

**思考题**

> 　　为什么现代计算机可以自动识别新插入的 USB 设备？它是如何知道这个设备的类型和所需的驱动程序的？

## 小结

### 知识点

- I/O 设备的分类和特点
- I/O 接口的功能
- 三种基本的 I/O 控制方式
- 现代 I/O 系统的特征

### 参考资料

1. [Wikipedia(zh)：输入输出](https://zh.wikipedia.org/wiki/%E8%BC%B8%E5%85%A5%E8%BC%B8%E5%87%BA)：计算机输入输出的基本概念
2. [Wikipedia(zh)：USB](https://zh.wikipedia.org/wiki/USB)：USB 接口的详细说明

### 思考题答案（仅供参考）

　　USB 设备内部包含一个特殊的存储区域，存储着设备描述符。当设备插入时，USB 控制器会读取这些描述符，获知设备的类型、制造商、产品 ID 等信息。操作系统根据这些信息查找合适的驱动程序。如果本地没有对应的驱动程序，现代操作系统通常会自动从网络下载。

## 协议

　　本作品采用[知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)进行许可。
